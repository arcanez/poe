<HTML>
<HEAD>
<TITLE><A HREF=/docs/POE/Wheel/FollowTail.html>POE::Wheel::FollowTail</A> - follow the tail of an ever-growing file</TITLE>
<LINK REV="made" HREF="mailto:">
</HEAD>

<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD WIDTH="30">
<img HSPACE="0" VSPACE="0" border="0" src="/images/L-circle.jpg" align="left" alt="" width="30" height="60">
</TD><TD ALIGN="Center" WIDTH=100% BGCOLOR="#000000">
<STRONG><font color="#FFFFFF" size="5"><A HREF=/docs/POE/Wheel/FollowTail.html>POE::Wheel::FollowTail</A> - follow the tail of an ever-growing file</font></STRONG></TD><TD>
<img HSPACE="0" VSPACE="0" border="0" src="/images/R-circle.jpg" align="right" alt="" width="30" height="60">
</TD></TR></TABLE>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#public methods">PUBLIC METHODS</A></LI>
	<LI><A HREF="#events and parameters">EVENTS AND PARAMETERS</A></LI>
	<LI><A HREF="#see also">SEE ALSO</A></LI>
	<LI><A HREF="#bugs">BUGS</A></LI>
	<LI><A HREF="#authors & copyrights">AUTHORS &amp; COPYRIGHTS</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P><A HREF=/docs/POE/Wheel/FollowTail.html>POE::Wheel::FollowTail</A> - follow the tail of an ever-growing file</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<PRE>
  $wheel = <A HREF=/docs/POE/Wheel/FollowTail.html>POE::Wheel::FollowTail</A>-&gt;new(
    Handle       =&gt; $file_handle,                  # File to tail
    Driver       =&gt; POE::Driver::Something-&gt;new(), # How to read it
    Filter       =&gt; POE::Filter::Something-&gt;new(), # How to parse it
    PollInterval =&gt; 1,                  # How often to check it
    InputState   =&gt; $input_event_name,  # State to call upon input
    ErrorState   =&gt; $error_event_name,  # State to call upon error
    SeekBack     =&gt; $offset,            # How far from EOF to start
  );</PRE>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>FollowTail follows the end of an ever-growing file, such as a log of
system events.  It generates events for each new record that is
appended to its file.</P>
<P>This is a read-only wheel so it does not include a <CODE>put()</CODE> method.</P>
<P>
<HR>
<H1><A NAME="public methods">PUBLIC METHODS</A></H1>
<DL>
<DT><STRONG><A NAME="item_event_EVENT_TYPE_%3D%3E_EVENT_NAME%2C_%2E%2E%2E">event EVENT_TYPE =&gt; EVENT_NAME, ...</A></STRONG><BR>
<DD>
<CODE>event()</CODE> is covered in the <A HREF=/docs/POE/Wheel.html>POE::Wheel</A> manpage.
<P>FollowTail's event types are <A HREF="#item_InputState"><CODE>InputState</CODE></A> and <A HREF="#item_ErrorState"><CODE>ErrorState</CODE></A>.</P>
<P></P>
<DT><STRONG><A NAME="item_ID">ID</A></STRONG><BR>
<DD>
The ID method returns a FollowTail wheel's unique ID.  This ID will be
included in every event the wheel generates, and it can be used to
match events with the wheels which generated them.
<P></P></DL>
<P>
<HR>
<H1><A NAME="events and parameters">EVENTS AND PARAMETERS</A></H1>
<DL>
<DT><STRONG><A NAME="item_PollInterval">PollInterval</A></STRONG><BR>
<DD>
PollInterval is the amount of time, in seconds, the wheel will wait
before retrying after it has reached the end of the file.  This delay
prevents the wheel from going into a CPU-sucking loop.
<P></P>
<DT><STRONG><A NAME="item_SeekBack">SeekBack</A></STRONG><BR>
<DD>
The SeekBack parameter tells FollowTail how far before EOF to start
reading before following the file.  Its value is specified in bytes,
and values greater than the file's current size will quietly cause
FollowTail to start from the file's beginning.
<P>When SeekBack isn't specified, the wheel seeks 4096 bytes before the
end of the file and discards everything it reads up until EOF.  It
does this to frame records within the file.</P>
<P>When SeekBack is used, the wheel assumes that records have already
been framed, and the seek position is the beginning of one.  It will
return everything it reads up until EOF.</P>
<P></P>
<DT><STRONG><A NAME="item_InputState">InputState</A></STRONG><BR>
<DD>
InputState contains the event which is emitted for every complete
record read.  Every InputState event is accompanied by two parameters.
<CODE>ARG0</CODE> contains the record which was read.  <CODE>ARG1</CODE> contains the
wheel's unique ID.
<P>A sample InputState event handler:</P>
<PRE>
  sub input_state {
    my ($heap, $input, $wheel_id) = @_[HEAP, ARG0, ARG1];
    print &quot;Wheel $wheel_id received input: $input\n&quot;;
  }</PRE>
<P></P>
<DT><STRONG><A NAME="item_ErrorState">ErrorState</A></STRONG><BR>
<DD>
ErrorState contains the event which is emitted whenever an error
occurs.  Every ErrorState event comes with four parameters:
<P><CODE>ARG0</CODE> contains the name of the operation that failed.  This usually
is 'read'.  Note: This is not necessarily a function name.  The wheel
doesn't know which function its Driver is using.</P>
<P><CODE>ARG1</CODE> and <CODE>ARG2</CODE> hold numeric and string values for <CODE>$!</CODE>,
respectively.  Note: FollowTail knows how to handle EAGAIN, so it will
never return that error.</P>
<P><CODE>ARG3</CODE> contains the wheel's unique ID.</P>
<P>A sample ErrorState event handler:</P>
<PRE>
  sub error_state {
    my ($operation, $errnum, $errstr, $wheel_id) = @_[ARG0..ARG3];
    warn &quot;Wheel $wheel_id generated $operation error $errnum: $errstr\n&quot;;
  }</PRE>
<P></P></DL>
<P>
<HR>
<H1><A NAME="see also">SEE ALSO</A></H1>
<P><A HREF=/docs/POE/Wheel.html>POE::Wheel</A>.</P>
<P>The <A HREF=/docs/POE.html#see also>SEE ALSO section in <EM>POE</EM></A> contains a table of contents covering
the entire POE distribution.</P>
<P>
<HR>
<H1><A NAME="bugs">BUGS</A></H1>
<P>This wheel can't tail pipes and consoles on some systems.</P>
<P>
<HR>
<H1><A NAME="authors & copyrights">AUTHORS &amp; COPYRIGHTS</A></H1>
<P>Please <A HREF=/docs/POE.html>see <EM>POE</EM></A> for more information about authors and contributors.</P>

</BODY>

</HTML>
