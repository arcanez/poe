<HTML>
<HEAD>
<TITLE><A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A> - freeze data for sending; thaw data when it arrives</TITLE>
<LINK REV="made" HREF="mailto:">
</HEAD>

<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH="100%"><TR><TD WIDTH="30">
<img HSPACE="0" VSPACE="0" border="0" src="/images/L-circle.jpg" align="left" alt="" width="30" height="60">
</TD><TD ALIGN="Center" WIDTH=100% BGCOLOR="#000000">
<STRONG><font color="#FFFFFF" size="5"><A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A> - freeze data for sending; thaw data when it arrives</font></STRONG></TD><TD>
<img HSPACE="0" VSPACE="0" border="0" src="/images/R-circle.jpg" align="right" alt="" width="30" height="60">
</TD></TR></TABLE>

<A NAME="__index__"></A>
<!-- INDEX BEGIN -->

<UL>

	<LI><A HREF="#name">NAME</A></LI>
	<LI><A HREF="#synopsis">SYNOPSIS</A></LI>
	<LI><A HREF="#description">DESCRIPTION</A></LI>
	<LI><A HREF="#public filter methods">PUBLIC FILTER METHODS</A></LI>
	<LI><A HREF="#see also">SEE ALSO</A></LI>
	<LI><A HREF="#bugs">BUGS</A></LI>
	<LI><A HREF="#authors & copyrights">AUTHORS &amp; COPYRIGHTS</A></LI>
</UL>
<!-- INDEX END -->

<HR>
<P>
<H1><A NAME="name">NAME</A></H1>
<P><A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A> - freeze data for sending; thaw data when it arrives</P>
<P>
<HR>
<H1><A NAME="synopsis">SYNOPSIS</A></H1>
<PRE>
  $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new();
  $arrayref_of_perl_references =
    $filter-&gt;get($arrayref_of_raw_chunks_from_driver);
  $arrayref_of_serialized_perl_references =
     $filter-&gt;put($arrayref_of_perl_references);</PRE>
<P>
<HR>
<H1><A NAME="description">DESCRIPTION</A></H1>
<P>This filter packages referenced data for writing to a file or socket.
Upon receipt of packaged data, it reconstitutes the original structure
and returns a reference to it.  This provides a handy way to ship data
between processes and systems.</P>
<P>
<HR>
<H1><A NAME="public filter methods">PUBLIC FILTER METHODS</A></H1>
<DL>
<DT><STRONG><A NAME="item_new">new SERIALIZER, COMPRESSION</A></STRONG><BR>
<DD>
<DT><STRONG>new SERIALIZER</STRONG><BR>
<DD>
<DT><STRONG>new</STRONG><BR>
<DD>
<A HREF="#item_new"><CODE>new()</CODE></A> creates and initializes a reference filter.  It accepts two
optional parameters: A serializer and a flag that determines whether
Compress::Zlib will be used to compress serialized data.
<P>Serializers are modelled after Storable.  Storable has a <CODE>nfreeze()</CODE>
function which translates referenced data into strings suitable for
shipping across sockets.  It also contains a <CODE>freeze()</CODE> method which is
less desirable since it doesn't take network byte ordering into
effect.  Finally there's <CODE>thaw()</CODE> which translates frozen strings back
into data.</P>
<P>SERIALIZER may be a package name or an object reference, or it may be
omitted altogether.</P>
<P>If SERIALIZER is a package name, it is assumed that the package will
have a <CODE>thaw()</CODE> function as well as etither an <CODE>nfreeze()</CODE> or a <CODE>freeze()</CODE>
function.</P>
<PRE>
  # Use Storable explicitly, specified by package name.
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new('Storable');</PRE>
<P>If SERIALIZER is an object reference, it's assumed to have a <CODE>thaw()</CODE>
method as well as either an <CODE>nfreeze()</CODE> or <CODE>freeze()</CODE> method.</P>
<PRE>
  # Use an object.
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new($object);</PRE>
<P>If SERIALIZER is omitted or undef, the Reference filter will try to
use Storable.  If storable isn't found, it will try FreezeThaw.  And
finally, if FreezeThaw is not found, it will die.</P>
<PRE>
  # Use the default filter (either Storable or FreezeThaw).
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new();</PRE>
<P>Filter::Reference will try to compress frozen strings and uncompress
them before thawing if COMPRESSION is true.  It uses Compress::Zlib
for this, but it works fine even without Zlib as long as COMPRESSION
is false.</P>
<P>An object serializer must have a <CODE>thaw()</CODE> method.  It also must have
either a <CODE>freeze()</CODE> or <CODE>nfreeze()</CODE> method.  If it has both <CODE>freeze()</CODE> and
nfreeze(), then Filter::Reference will use <CODE>nfreeze()</CODE> for portability.
The <CODE>thaw()</CODE> method accepts $self and a scalar; it should return a
reference to the reconstituted data.  The <CODE>freeze()</CODE> and <CODE>nfreeze()</CODE>
methods receive $self and a reference; they should return a scalar
with the reference's serialized representation.</P>
<P>If the serializer parameter is undef, a default one will be used.
This lets programs specify compression without having to worry about
naming a serializer.</P>
<P>For example:</P>
<PRE>
  # Use the default filter (either Storable or FreezeThaw).
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new();</PRE>
<PRE>
  # Use an object, with compression.
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new($object, 1);</PRE>
<PRE>
  # Use the default serializer, with compression.
  my $filter = <A HREF=/docs/POE/Filter/Reference.html>POE::Filter::Reference</A>-&gt;new(undef, 1);</PRE>
<P>The <A HREF="#item_new"><CODE>new()</CODE></A> method will try to require any packages it needs.</P>
<P>The default behavior is to try Storable first, FreezeThaw second, and
fail if neither is present.  This is rapidly becoming moot because of
the PM_PREREQ entry in Makefile.PL, which makes CPAN and ``make'' carp
about requirements even when they aren't required.</P>
<P></P>
<LI>
POE::Filter::Reference::get($frozen_data)
<P>The <CODE>get()</CODE> method thaws streamed, frozen data into references.
References will be blessed, if necessary.  If the reference points to
an object, be sure the receiving end has use'd it before calling its
methods.</P>
<P></P>
<LI>
POE::Filter::Reference::put($reference)
<P>The <CODE>put()</CODE> method freezes references and returns their serialized,
streamable representations.</P>
<P></P></DL>
<P>
<HR>
<H1><A NAME="see also">SEE ALSO</A></H1>
<P><A HREF=/docs/POE/Filter.html>POE::Filter</A>.</P>
<P>The <A HREF=/docs/POE.html#see also>SEE ALSO section in <EM>POE</EM></A> contains a table of contents covering
the entire POE distribution.</P>
<P>
<HR>
<H1><A NAME="bugs">BUGS</A></H1>
<P>Whatever is used to freeze and thaw data should be aware of potential
differences in system byte orders.  Also be careful that the same
freeze/thaw code is used on both sides of a socket.  That includes
even the most minor version differences.</P>
<P>
<HR>
<H1><A NAME="authors & copyrights">AUTHORS &amp; COPYRIGHTS</A></H1>
<P>The Reference filter was contributed by Arturn Bergman, with changes
by Philip Gwyn.</P>
<P>Please <A HREF=/docs/POE.html>see <EM>POE</EM></A> for more information about authors and contributors.</P>

</BODY>

</HTML>
